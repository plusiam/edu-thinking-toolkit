<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="초등교육을 위한 사고가시화 전략 도구 모음. 도입·탐구, 종합·체계화, 심화의 3단계 체계로 구성된 하버드 프로젝트 제로 기반 사고 루틴을 제공합니다.">
    <meta name="keywords" content="사고가시화, 교육도구, 초등교육, 하버드 프로젝트 제로, See-Think-Wonder, ORID, 사고루틴, 비저블씽킹">
    <meta name="author" content="룰루랄라 한기쌤">
    <title>생각이 보이는 교실 - 3단계 사고가시화 전략 허브</title>
    
    <!-- PWA 메타 태그 -->
    <meta name="theme-color" content="#4a90e2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="사고가시화">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/main-v2.css">
    <link rel="stylesheet" href="assets/css/stages.css">
    <link rel="stylesheet" href="assets/css/recommendations.css">
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- 기본 스타일 추가 -->
    <style>
        /* 도구 그리드 레이아웃 */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        /* 도구 카드 스타일 */
        .tool-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .tool-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }
        
        /* 단계별 색상 */
        .tool-card.exploration {
            border-color: #FFD93D;
        }
        
        .tool-card.synthesis {
            border-color: #FF8C00;
        }
        
        .tool-card.deepening {
            border-color: #4169E1;
        }
        
        /* 도구 헤더 */
        .tool-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .tool-icon {
            font-size: 2rem;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            border-radius: 0.5rem;
        }
        
        .tool-info {
            flex: 1;
        }
        
        .tool-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
            color: #333;
        }
        
        .tool-subtitle {
            font-size: 0.9rem;
            color: #666;
            margin: 0.2rem 0 0 0;
        }
        
        /* 도구 설명 */
        .tool-description {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 1rem;
        }
        
        /* 프로세스 단계 */
        .tool-process {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .process-step {
            font-size: 0.85rem;
            padding: 0.3rem 0.7rem;
            background: #f0f0f0;
            border-radius: 1rem;
            color: #666;
        }
        
        /* 도구 푸터 */
        .tool-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }
        
        .tool-tags {
            font-size: 0.85rem;
        }
        
        .tool-tag {
            color: #4a90e2;
        }
        
        /* 도구 링크 */
        .tool-links {
            display: flex;
            gap: 0.5rem;
        }
        
        .tool-link {
            font-size: 0.85rem;
            padding: 0.3rem 0.8rem;
            background: #4a90e2;
            color: white;
            text-decoration: none;
            border-radius: 0.5rem;
            transition: background 0.2s;
        }
        
        .tool-link:hover {
            background: #357abd;
        }
        
        .tool-link.new {
            background: #ff6b6b;
        }
        
        .tool-link.new:hover {
            background: #ff5252;
        }
        
        /* 다크 모드 스타일 */
        [data-theme="dark"] .tool-card {
            background: #2a2a2a;
            color: #e0e0e0;
        }
        
        [data-theme="dark"] .tool-icon {
            background: #3a3a3a;
        }
        
        [data-theme="dark"] .tool-title {
            color: #f0f0f0;
        }
        
        [data-theme="dark"] .tool-subtitle,
        [data-theme="dark"] .tool-description {
            color: #b0b0b0;
        }
        
        [data-theme="dark"] .process-step {
            background: #3a3a3a;
            color: #d0d0d0;
        }
        
        [data-theme="dark"] .tool-footer {
            border-top-color: #444;
        }
        
        /* 페이드 인 애니메이션 */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 기본 레이아웃 스타일 */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .section-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .stage-section {
            margin-bottom: 3rem;
        }
        
        .stage-header {
            margin-bottom: 1.5rem;
        }
        
        .stage-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .stage-description {
            color: #666;
        }
    </style>
</head>
<body>
    <!-- 접근성을 위한 스킵 링크 -->
    <a href="#main-content" class="sr-only">본문으로 바로가기</a>
    
    <!-- 오프라인 인디케이터 -->
    <div class="offline-indicator">
        <span>오프라인 모드</span>
    </div>

    <!-- 헤더 -->
    <header class="header" role="banner">
        <nav class="nav-container" role="navigation">
            <a href="#" class="logo" aria-label="생각이 보이는 교실 홈">
                <div class="logo-icon" aria-hidden="true">🧠</div>
                <span>생각이 보이는 교실</span>
            </a>
            <ul class="nav-menu">
                <li><a href="#stages" class="nav-link">3단계 도구</a></li>
                <li><a href="#recommend" class="nav-link">추천 도구</a></li>
                <li><a href="#pathways" class="nav-link">학습 경로</a></li>
                <li><a href="#about" class="nav-link">소개</a></li>
                <li>
                    <button 
                        class="theme-toggle" 
                        id="theme-toggle" 
                        aria-label="다크모드 토글"
                        title="테마 변경"
                    >
                        <span class="theme-icon">☀️</span>
                    </button>
                </li>
            </ul>
        </nav>
    </header>

    <!-- 히어로 섹션 -->
    <section class="hero" role="banner">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="hero-emoji">🌱</span>
                생각이 보이는 교실
                <span class="hero-subtitle">3단계 사고가시화 전략 허브</span>
            </h1>
            <p class="hero-description">
                하버드 프로젝트 제로의 검증된 사고 루틴을 
                <strong>도입·탐구 → 종합·체계화 → 심화</strong>의 
                3단계 체계로 구성하여 제공합니다.
            </p>
            
            <!-- 단계별 시각적 흐름 표시 -->
            <div class="stage-flow">
                <div class="stage-item exploration">
                    <span class="stage-icon">🟡</span>
                    <span class="stage-name">도입·탐구</span>
                </div>
                <span class="flow-arrow">→</span>
                <div class="stage-item synthesis">
                    <span class="stage-icon">🟠</span>
                    <span class="stage-name">종합·체계화</span>
                </div>
                <span class="flow-arrow">→</span>
                <div class="stage-item deepening">
                    <span class="stage-icon">🔵</span>
                    <span class="stage-name">심화</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 메인 컨텐츠 -->
    <main class="main-content" id="main-content">
        
        <!-- 빠른 추천 섹션 -->
        <section class="quick-recommend" id="recommend">
            <div class="container">
                <h2 class="section-title">🎯 맞춤형 도구 추천</h2>
                <p class="section-subtitle">수업 상황에 맞는 사고가시화 도구를 추천받아보세요</p>
                
                <div class="recommend-wizard">
                    <div class="wizard-controls">
                        <div class="control-group">
                            <label for="subject-select">과목 선택</label>
                            <select id="subject-select" class="form-select">
                                <option value="">전체 과목</option>
                                <option value="korean">국어</option>
                                <option value="math">수학</option>
                                <option value="science">과학</option>
                                <option value="social">사회</option>
                                <option value="art">예술</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label for="theme-select">학습 주제</label>
                            <select id="theme-select" class="form-select" disabled>
                                <option value="">과목을 먼저 선택하세요</option>
                            </select>
                        </div>
                        
                        <button class="recommend-btn" id="get-recommendation" disabled>
                            추천받기 ✨
                        </button>
                    </div>
                    
                    <div id="recommendation-result" class="recommendation-result" style="display: none;">
                        <!-- 추천 결과가 여기에 표시됩니다 -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 3단계 도구 섹션 -->
        <section class="stages-section" id="stages">
            <div class="container">
                <h2 class="section-title">📚 단계별 사고가시화 도구</h2>
                
                <!-- 검색 기능 -->
                <div class="search-section">
                    <div class="search-wrapper">
                        <span class="search-icon">🔍</span>
                        <input 
                            type="search" 
                            id="search-input" 
                            class="search-input" 
                            placeholder="도구 이름, 기능, 과목으로 검색..."
                            aria-label="도구 검색"
                        >
                    </div>
                </div>

                <!-- 1단계: 도입·탐구 -->
                <div class="stage-section exploration-stage">
                    <div class="stage-header">
                        <h3 class="stage-title">
                            <span class="stage-icon">🟡</span>
                            1단계: 도입·탐구
                        </h3>
                        <p class="stage-description">
                            호기심 유발, 탐구 질문 생성, 사전 지식 활성화
                        </p>
                    </div>
                    <div class="tools-grid" id="exploration-tools">
                        <!-- 도구 카드들이 JavaScript로 로드됩니다 -->
                    </div>
                </div>

                <!-- 2단계: 종합·체계화 -->
                <div class="stage-section synthesis-stage">
                    <div class="stage-header">
                        <h3 class="stage-title">
                            <span class="stage-icon">🟠</span>
                            2단계: 종합·체계화
                        </h3>
                        <p class="stage-description">
                            정보 구조화, 개념 간 연결, 지식 체계 구축
                        </p>
                    </div>
                    <div class="tools-grid" id="synthesis-tools">
                        <!-- 도구 카드들이 JavaScript로 로드됩니다 -->
                    </div>
                </div>

                <!-- 3단계: 심화 -->
                <div class="stage-section deepening-stage">
                    <div class="stage-header">
                        <h3 class="stage-title">
                            <span class="stage-icon">🔵</span>
                            3단계: 심화
                        </h3>
                        <p class="stage-description">
                            메타인지 발달, 관점 전환, 깊은 성찰
                        </p>
                    </div>
                    <div class="tools-grid" id="deepening-tools">
                        <!-- 도구 카드들이 JavaScript로 로드됩니다 -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 학습 경로 섹션 -->
        <section class="pathways-section" id="pathways">
            <div class="container">
                <h2 class="section-title">🛤️ 추천 학습 경로</h2>
                <p class="section-subtitle">목적에 따른 사고가시화 도구 활용 순서</p>
                
                <div class="pathways-grid">
                    <div class="pathway-card creativity">
                        <h4 class="pathway-title">💡 창의성 개발</h4>
                        <div class="pathway-flow">
                            <span class="pathway-step">Chalk Talk</span>
                            <span class="arrow">→</span>
                            <span class="pathway-step">Generate-Sort-Connect</span>
                            <span class="arrow">→</span>
                            <span class="pathway-step">CSI</span>
                        </div>
                    </div>
                    
                    <div class="pathway-card critical">
                        <h4 class="pathway-title">🤔 비판적 사고</h4>
                        <div class="pathway-flow">
                            <span class="pathway-step">Compass Points</span>
                            <span class="arrow">→</span>
                            <span class="pathway-step">4C</span>
                            <span class="arrow">→</span>
                            <span class="pathway-step">Circle of Viewpoints</span>
                        </div>
                    </div>
                    
                    <div class="pathway-card collaboration">
                        <h4 class="pathway-title">🤝 협력 학습</h4>
                        <div class="pathway-flow">
                            <span class="pathway-step">Think-Puzzle-Explore</span>
                            <span class="arrow">→</span>
                            <span class="pathway-step">Chalk Talk</span>
                            <span class="arrow">→</span>
                            <span class="pathway-step">Micro Lab</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 통계 섹션 -->
        <section class="stats-section">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number" id="tools-count">13</span>
                        <div class="stat-label">검증된 사고 루틴</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">3</span>
                        <div class="stat-label">체계적 단계</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">5</span>
                        <div class="stat-label">교과 영역</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">∞</span>
                        <div class="stat-label">활용 가능성</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 소개 섹션 -->
        <section class="about-section" id="about">
            <div class="container">
                <h2 class="section-title">🌟 3단계 사고가시화 체계란?</h2>
                <div class="about-content">
                    <div class="about-text">
                        <p>
                            하버드 프로젝트 제로(Project Zero)의 연구를 바탕으로, 
                            사고가시화 전략을 학습의 흐름에 따라 3단계로 체계화했습니다.
                        </p>
                        <div class="stage-explanation">
                            <div class="stage-item">
                                <h4>🟡 1단계: 도입·탐구</h4>
                                <p>개방적 질문과 호기심을 통해 사고를 시작하고, 탐구 질문을 형성합니다.</p>
                            </div>
                            <div class="stage-item">
                                <h4>🟠 2단계: 종합·체계화</h4>
                                <p>개념을 분류하고 연결하여 지식 구조를 형성하고, 시각화합니다.</p>
                            </div>
                            <div class="stage-item">
                                <h4>🔵 3단계: 심화</h4>
                                <p>자신의 생각을 반성하고, 관점을 확장하며, 변화된 사고를 표현합니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>생각이 보이는 교실</h4>
                    <p>하버드 프로젝트 제로 기반의 사고가시화 전략을 한국 교육 현장에 맞게 재구성했습니다.</p>
                </div>
                <div class="footer-section">
                    <h4>개발자 정보</h4>
                    <p><strong>룰루랄라 한기쌤</strong></p>
                    <p>Facebook: <a href="https://www.facebook.com/playrurulala" target="_blank" rel="noopener">@playrurulala</a></p>
                    <p>GitHub: <a href="https://github.com/plusiam" target="_blank" rel="noopener">@plusiam</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="copyright-year">2025</span> 생각이 보이는 교실. 교육을 위한 오픈소스 프로젝트입니다.</p>
            </div>
        </div>
    </footer>

    <!-- Inline JavaScript with data -->
    <script>
// 데이터를 직접 포함
const toolsData = {
  "stages": [
    {
      "id": "exploration",
      "name": "도입·탐구",
      "color": "#FFD93D",
      "icon": "🟡",
      "description": "호기심 유발, 탐구 질문 생성, 사전 지식 활성화",
      "characteristics": ["개방적 사고", "관찰 중심", "질문 생성"]
    },
    {
      "id": "synthesis",
      "name": "종합·체계화",
      "color": "#FF8C00",
      "icon": "🟠",
      "description": "정보 구조화, 개념 간 연결, 지식 체계 구축",
      "characteristics": ["구조적 사고", "시각적 표현", "연결적 사고"]
    },
    {
      "id": "deepening",
      "name": "심화",
      "color": "#4169E1",
      "icon": "🔵",
      "description": "메타인지 발달, 관점 전환, 깊은 성찰",
      "characteristics": ["성찰적 사고", "다원적 관점", "변화 인식"]
    }
  ],
  "tools": [
    {
      "id": "see-think-wonder",
      "title": "보기·생각하기·궁금해하기",
      "englishTitle": "See-Think-Wonder",
      "icon": "🔍",
      "stage": "exploration",
      "stageOrder": 1,
      "description": "관찰에서 시작하는 탐구의 첫걸음. 관찰, 추론, 질문 생성을 통해 비판적 사고력과 탐구력을 기릅니다.",
      "process": ["관찰 (See)", "추론 (Think)", "궁금증 (Wonder)"],
      "features": [
        "관찰력 및 탐구력 향상",
        "비판적 사고 개발",
        "질문 생성 능력 강화",
        "그림책 활용 최적화"
      ],
      "urls": [
        {
          "version": "v1",
          "url": "https://plusiam.github.io/see-think-wonder-worksheet/",
          "label": "기본 버전"
        },
        {
          "version": "v2",
          "url": "https://plusiam.github.io/see-think-wonder-v2/",
          "label": "향상된 버전",
          "isNew": true
        },
        {
          "version": "template",
          "url": "https://plusiam.github.io/see-think-wonder-templet/",
          "label": "인쇄용 템플릿"
        }
      ],
      "subjects": ["korean", "science", "social", "art"],
      "skills": ["observation", "inquiry", "critical-thinking"]
    },
    {
      "id": "think-puzzle-explore",
      "title": "생각-퍼즐-탐구",
      "englishTitle": "Think-Puzzle-Explore",
      "icon": "🧩",
      "stage": "exploration",
      "stageOrder": 2,
      "description": "알고 있는 것에서 출발하는 탐구 설계. 현재 지식을 점검하고 궁금한 점을 찾아 탐구 계획을 세웁니다.",
      "process": ["아는 것 (Think)", "궁금한 것 (Puzzle)", "알아낼 방법 (Explore)"],
      "features": [
        "사전 지식 활성화",
        "호기심과 질문 생성",
        "탐구 계획 수립",
        "메타인지 발달"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/think-puzzle-explore/"
        }
      ],
      "subjects": ["all"],
      "skills": ["inquiry", "planning", "metacognition"]
    },
    {
      "id": "bridge-321",
      "title": "3-2-1 브릿지",
      "englishTitle": "3-2-1 Bridge",
      "icon": "🌉",
      "stage": "exploration",
      "stageOrder": 3,
      "description": "학습 전후 생각의 다리 놓기. 학습 전후의 생각 변화를 추적하고 연결고리를 찾아 메타인지를 발달시킵니다.",
      "process": ["학습 전 (3-2-1)", "학습 활동", "학습 후 (3-2-1)", "브릿지 만들기"],
      "features": [
        "학습 전후 비교 분석",
        "메타인지 능력 향상",
        "사고 변화 추적",
        "성찰적 학습 지원"
      ],
      "urls": [
        {
          "version": "v1",
          "url": "https://plusiam.github.io/321-bridge-worksheet/",
          "label": "기본 버전"
        },
        {
          "version": "v2",
          "url": "https://plusiam.github.io/321-bridge-worksheet/321.html",
          "label": "Enhanced v2.2",
          "isNew": true
        }
      ],
      "subjects": ["all"],
      "skills": ["metacognition", "reflection", "comparison"]
    },
    {
      "id": "frayer",
      "title": "프레이어 모델",
      "englishTitle": "Frayer Model",
      "icon": "📊",
      "stage": "exploration",
      "stageOrder": 4,
      "description": "개념 탐색을 위한 4분면 사고. 개념을 정의, 특성, 예시, 비례시로 나누어 체계적으로 분석합니다.",
      "process": ["정의", "특성", "예시", "비례시"],
      "features": [
        "개념의 깊이 있는 이해",
        "구조화된 사고 과정",
        "시각적 학습 지원",
        "PDF/이미지 저장"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/frayer-model-worksheet/"
        }
      ],
      "subjects": ["all"],
      "skills": ["conceptual", "analysis", "organization"]
    },
    {
      "id": "headline",
      "title": "나만의 한 줄 요약",
      "englishTitle": "Headlines",
      "icon": "📝",
      "stage": "synthesis",
      "stageOrder": 1,
      "description": "핵심을 한 문장으로 담아내기. 핵심 내용을 간결하고 명확하게 요약하는 능력을 기릅니다.",
      "process": ["핵심 파악", "키워드 추출", "한 문장 요약"],
      "features": [
        "요약 능력 향상",
        "핵심 파악 훈련",
        "단계별 사고 과정",
        "초등학생 친화적"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/headline-maker-kids/"
        }
      ],
      "subjects": ["all"],
      "skills": ["summarizing", "synthesis", "communication"]
    },
    {
      "id": "csi",
      "title": "색상-상징-이미지",
      "englishTitle": "Color, Symbol, Image",
      "icon": "🎨",
      "stage": "synthesis",
      "stageOrder": 2,
      "description": "추상을 구체로, 생각을 이미지로. 핵심 아이디어를 색상, 상징, 이미지로 표현하며 창의적 사고를 촉진합니다.",
      "process": ["색상 선택", "상징 그리기", "이미지 표현", "의미 설명"],
      "features": [
        "추상적 개념의 시각화",
        "창의적 표현력 개발",
        "디지털/인쇄 모드 지원",
        "자동 저장 및 이미지 저장"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/color-symbol-image-worksheet/"
        }
      ],
      "subjects": ["korean", "social", "art", "music"],
      "skills": ["creative", "visual", "metaphorical"]
    },
    {
      "id": "generate-sort-connect-elaborate",
      "title": "생성-분류-연결-정교화",
      "englishTitle": "Generate-Sort-Connect-Elaborate",
      "icon": "💡",
      "stage": "synthesis",
      "stageOrder": 3,
      "description": "아이디어의 생성과 연결. 아이디어를 생성하고, 분류하며, 연결하고, 정교화하는 4단계 사고 과정입니다.",
      "process": ["아이디어 생성", "범주별 분류", "관계 연결", "의미 정교화"],
      "features": [
        "캔버스 기반 아이디어 맵핑",
        "드래그&드롭으로 자유로운 분류",
        "아이디어 간 연결선 그리기",
        "PNG 이미지로 한 번에 저장"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/generate-classify-connect-elaborate/"
        }
      ],
      "subjects": ["all"],
      "skills": ["creative", "organization", "systems-thinking"]
    },
    {
      "id": "connect-extend-challenge",
      "title": "연결-확장-도전",
      "englishTitle": "Connect-Extend-Challenge",
      "icon": "🔗",
      "stage": "synthesis",
      "stageOrder": 4,
      "description": "지식의 확장과 도전. 이미 알고 있는 것과 연결하고, 새로운 생각으로 확장하며, 도전적인 질문을 만듭니다.",
      "process": ["기존 지식과 연결", "새로운 관점으로 확장", "도전적 질문 생성"],
      "features": [
        "사전 지식과의 연결",
        "창의적 사고 확장",
        "비판적 질문 생성",
        "A4 가로 인쇄 최적화"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/connect-extend-challengge-templates/"
        }
      ],
      "subjects": ["all"],
      "skills": ["connection", "extension", "critical-thinking"]
    },
    {
      "id": "sentence-phrase-word",
      "title": "문장-구절-단어",
      "englishTitle": "Sentence-Phrase-Word",
      "icon": "📚",
      "stage": "synthesis",
      "stageOrder": 5,
      "description": "텍스트의 핵심 추출하기. 의미있는 문장을 선택하고, 핵심 구절을 찾아, 중요한 단어를 추출합니다.",
      "process": ["중요 문장 선택", "핵심 구절 찾기", "대표 단어 추출"],
      "features": [
        "체계적인 텍스트 분석",
        "구조적 사고력 향상",
        "문학 작품 탐구 최적화",
        "1페이지 인쇄 완벽 지원"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/sentence-phrase-word/"
        }
      ],
      "subjects": ["korean", "english"],
      "skills": ["analysis", "synthesis", "comprehension"]
    },
    {
      "id": "orid",
      "title": "ORID 성찰 도구",
      "englishTitle": "ORID Reflection",
      "icon": "🎯",
      "stage": "deepening",
      "stageOrder": 1,
      "description": "4단계로 깊어지는 체계적 성찰. 객관적 사실부터 미래 행동까지 체계적인 성찰 과정을 거칩니다.",
      "process": ["객관적 관찰 (O)", "정서적 반응 (R)", "의미 해석 (I)", "결정과 행동 (D)"],
      "features": [
        "체계적인 4단계 성찰",
        "객관적 관찰력 향상",
        "감정 인식 및 표현",
        "의미 도출과 행동 계획"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/orid-reflection-tool/"
        }
      ],
      "subjects": ["all"],
      "skills": ["reflection", "metacognition", "self-awareness"]
    },
    {
      "id": "step-inside",
      "title": "마음속으로 들어가기",
      "englishTitle": "Step Inside",
      "icon": "🎭",
      "stage": "deepening",
      "stageOrder": 2,
      "description": "타인의 마음속으로 들어가기. 인물의 입장이 되어 생각해보는 공감과 성찰 기반 학습 도구입니다.",
      "process": ["인물 선택", "입장 상상", "감정 탐색", "행동 이해"],
      "features": [
        "영상 시청 후 내용 정리",
        "능동적 질문 생성",
        "인물 입장 체험",
        "가치관 성찰"
      ],
      "urls": [
        {
          "version": "v1",
          "url": "https://plusiam.github.io/step-inside-worksheet/"
        },
        {
          "version": "v2",
          "url": "https://plusiam.github.io/step-inside-v2/",
          "isNew": true
        }
      ],
      "subjects": ["korean", "social", "ethics"],
      "skills": ["empathy", "perspective-taking", "emotional"]
    },
    {
      "id": "circle-of-viewpoints",
      "title": "관점의 원",
      "englishTitle": "Circle of Viewpoints",
      "icon": "🎯",
      "stage": "deepening",
      "stageOrder": 3,
      "description": "다양한 관점에서 바라보기. 하나의 주제에 대해 여러 입장에서 생각해보고 탐구합니다.",
      "process": ["관점 선택", "입장 탐구", "근거 제시", "종합 성찰"],
      "features": [
        "인터랙티브 룰렛으로 관점 선택",
        "구조화된 3단계 탐구 과정",
        "실시간 진행률 추적",
        "탐구 결과 이미지 저장"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/interactive-viewpoints-circle/"
        }
      ],
      "subjects": ["social", "ethics", "science"],
      "skills": ["perspective-taking", "critical-thinking", "empathy"]
    },
    {
      "id": "abc-think",
      "title": "ABC 생각바꾸기",
      "englishTitle": "ABC Thinking",
      "icon": "💭",
      "stage": "deepening",
      "stageOrder": 4,
      "description": "마음을 건강하게 조절하기. 나의 생각을 돌아보며 건강한 사고 패턴을 형성합니다.",
      "process": ["상황 인식 (A)", "생각 점검 (B)", "결과 확인 (C)", "대안 찾기"],
      "features": [
        "정서 조절 능력 향상",
        "건강한 사고 패턴 형성",
        "자기 성찰 훈련",
        "마음 건강 관리"
      ],
      "urls": [
        {
          "version": "main",
          "url": "https://plusiam.github.io/abc-think/"
        }
      ],
      "subjects": ["counseling", "ethics", "health"],
      "skills": ["emotional", "self-regulation", "resilience"]
    }
  ],
  "subjects": {
    "korean": {
      "name": "국어",
      "icon": "📖",
      "themes": {
        "literature": {
          "name": "문학 작품 분석",
          "recommended": ["see-think-wonder", "step-inside", "csi"],
          "flow": "작품 관찰 → 인물 공감 → 주제 시각화"
        },
        "writing": {
          "name": "글쓰기",
          "recommended": ["think-puzzle-explore", "connect-extend-challenge", "headline"],
          "flow": "주제 탐구 → 내용 확장 → 핵심 정리"
        },
        "poetry": {
          "name": "시 창작",
          "recommended": ["zoom-in", "csi", "sentence-phrase-word"],
          "flow": "이미지 관찰 → 감정 표현 → 언어 선택"
        },
        "discussion": {
          "name": "토론·토의",
          "recommended": ["compass-points", "circle-of-viewpoints", "4c"],
          "flow": "입장 정리 → 관점 교환 → 심화 분석"
        }
      }
    },
    "math": {
      "name": "수학",
      "icon": "🔢",
      "themes": {
        "problem-solving": {
          "name": "문제 해결",
          "recommended": ["think-puzzle-explore", "generate-sort-connect-elaborate", "i-used-to-think"],
          "flow": "문제 분석 → 전략 구성 → 오류 수정"
        },
        "concepts": {
          "name": "개념 학습",
          "recommended": ["frayer", "connect-extend-challenge", "orid"],
          "flow": "개념 정의 → 관련 개념 연결 → 이해 성찰"
        },
        "patterns": {
          "name": "규칙성 탐구",
          "recommended": ["see-think-wonder", "zoom-in", "headline"],
          "flow": "패턴 관찰 → 세부 분석 → 규칙 정리"
        }
      }
    },
    "science": {
      "name": "과학",
      "icon": "🔬",
      "themes": {
        "experiment": {
          "name": "실험 설계",
          "recommended": ["think-puzzle-explore", "generate-sort-connect-elaborate", "4c"],
          "flow": "가설 설정 → 변인 정리 → 결과 분석"
        },
        "phenomena": {
          "name": "자연 현상",
          "recommended": ["zoom-in", "see-think-wonder", "explanation-game"],
          "flow": "현상 관찰 → 질문 생성 → 원리 설명"
        },
        "environment": {
          "name": "환경 문제",
          "recommended": ["compass-points", "csi", "headline"],
          "flow": "문제 분석 → 영향 시각화 → 해결책 제시"
        }
      }
    },
    "social": {
      "name": "사회",
      "icon": "🌏",
      "themes": {
        "history": {
          "name": "역사 탐구",
          "recommended": ["zoom-in", "circle-of-viewpoints", "step-inside"],
          "flow": "사료 분석 → 다양한 입장 → 인물 이해"
        },
        "geography": {
          "name": "지리 학습",
          "recommended": ["see-think-wonder", "connect-extend-challenge", "csi"],
          "flow": "지형 관찰 → 생활 연결 → 특징 시각화"
        },
        "current-affairs": {
          "name": "시사 이슈",
          "recommended": ["compass-points", "4c", "headline"],
          "flow": "이슈 분석 → 심층 탐구 → 핵심 정리"
        }
      }
    },
    "art": {
      "name": "예술",
      "icon": "🎨",
      "themes": {
        "appreciation": {
          "name": "작품 감상",
          "recommended": ["see-think-wonder", "csi", "step-inside"],
          "flow": "작품 관찰 → 느낌 표현 → 작가 이해"
        },
        "creation": {
          "name": "창작 활동",
          "recommended": ["chalk-talk", "generate-sort-connect-elaborate", "csi"],
          "flow": "아이디어 공유 → 구성 계획 → 작품 표현"
        }
      }
    },
    "all": {
      "name": "전체",
      "icon": "🌐"
    }
  },
  "skills": {
    "observation": { "name": "관찰력", "icon": "👁️" },
    "inquiry": { "name": "탐구력", "icon": "🔍" },
    "critical-thinking": { "name": "비판적 사고", "icon": "🤔" },
    "creative": { "name": "창의성", "icon": "💡" },
    "metacognition": { "name": "메타인지", "icon": "🧠" },
    "empathy": { "name": "공감", "icon": "❤️" },
    "reflection": { "name": "성찰", "icon": "🪞" },
    "synthesis": { "name": "종합", "icon": "🔗" },
    "communication": { "name": "소통", "icon": "💬" }
  },
  "metadata": {
    "version": "3.0",
    "lastUpdated": "2025-06-15",
    "totalTools": 13,
    "author": "룰루랄라 한기쌤"
  }
};

// 도구 표시 함수
function displayTools() {
    const explorationContainer = document.getElementById('exploration-tools');
    const synthesisContainer = document.getElementById('synthesis-tools');
    const deepeningContainer = document.getElementById('deepening-tools');
    
    if (!explorationContainer || !synthesisContainer || !deepeningContainer) {
        console.error('도구 컨테이너를 찾을 수 없습니다.');
        return;
    }
    
    // 기존 내용 초기화
    explorationContainer.innerHTML = '';
    synthesisContainer.innerHTML = '';
    deepeningContainer.innerHTML = '';
    
    // 도구를 단계별로 분류하여 표시
    toolsData.tools.forEach(tool => {
        const toolCard = createToolCard(tool);
        
        switch(tool.stage) {
            case 'exploration':
                explorationContainer.appendChild(toolCard);
                break;
            case 'synthesis':
                synthesisContainer.appendChild(toolCard);
                break;
            case 'deepening':
                deepeningContainer.appendChild(toolCard);
                break;
        }
    });
    
    console.log('도구 표시 완료');
}

// 도구 카드 생성
function createToolCard(tool) {
    const card = document.createElement('div');
    card.className = `tool-card ${tool.stage} fade-in`;
    card.dataset.toolId = tool.id;
    card.dataset.subjects = tool.subjects.join(',');
    card.dataset.skills = tool.skills.join(',');
    
    // 추천 과목 태그 생성
    const subjectTags = tool.subjects.map(subject => {
        const subjectData = toolsData.subjects[subject];
        return subjectData ? `#${subjectData.name}` : '';
    }).filter(tag => tag).join(' ');
    
    // 버전별 링크 생성
    const links = tool.urls.map(url => {
        const isNew = url.isNew ? ' new' : '';
        const label = url.label || '열기';
        return `<a href="${url.url}" target="_blank" class="tool-link${isNew}">${label}</a>`;
    }).join('');
    
    card.innerHTML = `
        <div class="tool-header">
            <div class="tool-icon">${tool.icon}</div>
            <div class="tool-info">
                <h3 class="tool-title">${tool.title}</h3>
                <p class="tool-subtitle">${tool.englishTitle}</p>
            </div>
        </div>
        <p class="tool-description">${tool.description}</p>
        <div class="tool-process">
            ${tool.process.map(step => `<span class="process-step">${step}</span>`).join('')}
        </div>
        <div class="tool-footer">
            <div class="tool-tags">
                <span class="tool-tag">${subjectTags}</span>
            </div>
            <div class="tool-links">
                ${links}
            </div>
        </div>
    `;
    
    return card;
}

// 페이지 로드 시 실행
document.addEventListener('DOMContentLoaded', function() {
    console.log('페이지 로드 완료');
    displayTools();
    
    // 검색 기능
    const searchInput = document.getElementById('search-input');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase().trim();
            filterTools(query);
        });
    }
    
    // 추천 시스템
    const subjectSelect = document.getElementById('subject-select');
    const themeSelect = document.getElementById('theme-select');
    const recommendBtn = document.getElementById('get-recommendation');
    
    if (subjectSelect && themeSelect && recommendBtn) {
        subjectSelect.addEventListener('change', function() {
            const selectedSubject = this.value;
            
            if (selectedSubject) {
                loadThemeOptions(selectedSubject);
                themeSelect.disabled = false;
                recommendBtn.disabled = false;
            } else {
                themeSelect.innerHTML = '<option value="">과목을 먼저 선택하세요</option>';
                themeSelect.disabled = true;
                recommendBtn.disabled = true;
            }
        });
        
        recommendBtn.addEventListener('click', function() {
            const subject = subjectSelect.value;
            const theme = themeSelect.value;
            
            if (subject) {
                showRecommendations(subject, theme);
            }
        });
    }
    
    // 테마 전환
    const themeToggle = document.getElementById('theme-toggle');
    if (themeToggle) {
        const currentTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', currentTheme);
        updateThemeIcon(currentTheme);
        
        themeToggle.addEventListener('click', function() {
            const theme = document.documentElement.getAttribute('data-theme');
            const newTheme = theme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
    }
});

// 테마 아이콘 업데이트
function updateThemeIcon(theme) {
    const icon = document.querySelector('.theme-icon');
    if (icon) {
        icon.textContent = theme === 'light' ? '☀️' : '🌙';
    }
}

// 도구 필터링 (수정된 버전)
function filterTools(query) {
    const allCards = document.querySelectorAll('.tool-card');
    let hasVisibleCards = false;
    
    // 각 단계별 컨테이너
    const containers = {
        'exploration': document.getElementById('exploration-tools'),
        'synthesis': document.getElementById('synthesis-tools'),
        'deepening': document.getElementById('deepening-tools')
    };
    
    // 각 단계별로 보이는 카드 수 계산
    const visibleCounts = {
        'exploration': 0,
        'synthesis': 0,
        'deepening': 0
    };
    
    allCards.forEach(card => {
        if (!query) {
            // 검색어가 없으면 모든 카드 표시
            card.style.display = '';
            const stage = card.classList.contains('exploration') ? 'exploration' :
                        card.classList.contains('synthesis') ? 'synthesis' : 'deepening';
            visibleCounts[stage]++;
            hasVisibleCards = true;
        } else {
            const toolId = card.dataset.toolId;
            const tool = toolsData.tools.find(t => t.id === toolId);
            
            if (!tool) return;
            
            // 검색 대상 텍스트 구성
            const searchTargets = [
                tool.title,
                tool.englishTitle,
                tool.description,
                ...tool.process,
                ...tool.subjects.map(s => toolsData.subjects[s]?.name || ''),
                ...tool.skills.map(s => toolsData.skills[s]?.name || '')
            ].join(' ').toLowerCase();
            
            // 검색어가 포함되어 있는지 확인
            if (searchTargets.includes(query)) {
                card.style.display = '';
                card.classList.add('fade-in');
                const stage = tool.stage;
                visibleCounts[stage]++;
                hasVisibleCards = true;
            } else {
                card.style.display = 'none';
            }
        }
    });
    
    // 각 단계 섹션의 표시/숨김 처리
    Object.keys(containers).forEach(stage => {
        const section = containers[stage].closest('.stage-section');
        if (section) {
            if (visibleCounts[stage] === 0 && query) {
                section.style.display = 'none';
            } else {
                section.style.display = '';
            }
        }
    });
    
    // 검색 결과가 없을 때 메시지 표시 (선택사항)
    if (!hasVisibleCards && query) {
        console.log('검색 결과가 없습니다:', query);
    }
}

// 주제 옵션 로드
function loadThemeOptions(subject) {
    const themeSelect = document.getElementById('theme-select');
    const subjectData = toolsData.subjects[subject];
    
    if (subjectData && subjectData.themes) {
        let options = '<option value="">전체 주제</option>';
        
        Object.entries(subjectData.themes).forEach(([key, theme]) => {
            options += `<option value="${key}">${theme.name}</option>`;
        });
        
        themeSelect.innerHTML = options;
    }
}

// 추천 결과 표시
function showRecommendations(subject, theme) {
    const resultContainer = document.getElementById('recommendation-result');
    const subjectData = toolsData.subjects[subject];
    
    if (!subjectData || !resultContainer) return;
    
    let recommendedTools = [];
    let flow = '';
    
    if (theme && subjectData.themes[theme]) {
        const themeData = subjectData.themes[theme];
        recommendedTools = themeData.recommended;
        flow = themeData.flow;
    } else {
        const allTools = new Set();
        Object.values(subjectData.themes).forEach(themeData => {
            themeData.recommended.forEach(tool => allTools.add(tool));
        });
        recommendedTools = Array.from(allTools);
        flow = '다양한 주제에 활용 가능한 도구들입니다.';
    }
    
    const tools = recommendedTools.map(toolId => 
        toolsData.tools.find(t => t.id === toolId)
    ).filter(tool => tool);
    
    let resultHTML = `
        <div class="recommendation-header">
            <span style="font-size: 2rem;">${subjectData.icon}</span>
            <h3 class="recommendation-title">${subjectData.name} 추천 도구</h3>
        </div>
        <p style="color: var(--text-secondary); margin-bottom: 2rem;">${flow}</p>
        <div class="recommendation-flow">
    `;
    
    tools.forEach((tool, index) => {
        const stageData = toolsData.stages.find(s => s.id === tool.stage);
        resultHTML += `
            <div class="flow-step">
                <div class="flow-step-icon">${tool.icon}</div>
                <div class="flow-step-title">${tool.title}</div>
                <div class="flow-step-subtitle">${stageData.name}</div>
            </div>
        `;
        
        if (index < tools.length - 1) {
            resultHTML += '<span class="flow-arrow">→</span>';
        }
    });
    
    resultHTML += `
        </div>
        <div class="recommendation-tools">
    `;
    
    tools.forEach(tool => {
        const card = createToolCard(tool);
        resultHTML += card.outerHTML;
    });
    
    resultHTML += '</div>';
    
    resultContainer.innerHTML = resultHTML;
    resultContainer.style.display = 'block';
    
    resultContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
}
    </script>
</body>
</html>